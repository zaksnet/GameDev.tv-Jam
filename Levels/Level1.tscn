[gd_scene load_steps=90 format=2]

[ext_resource path="res://addons/node_fsm_plugin/fsm_node.gd" type="Script" id=1]
[ext_resource path="res://Tiles/new_tileset.tres" type="TileSet" id=2]
[ext_resource path="res://Assets/Boss/boss hit the ground/00 - boss hit the ground - boss rumble.ogg" type="AudioStream" id=3]
[ext_resource path="res://Assets/Herb.svg" type="Texture" id=4]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00062.png" type="Texture" id=5]
[ext_resource path="res://Assets/Boss/00 - Stage - Music Level Master.ogg" type="AudioStream" id=6]
[ext_resource path="res://Assets/Boss/boss zombie growl/00 - boss zombie growl - sfx zombiegrowl 01.ogg" type="AudioStream" id=7]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00074.png" type="Texture" id=8]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00072.png" type="Texture" id=9]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00073.png" type="Texture" id=10]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00078.png" type="Texture" id=11]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00055.png" type="Texture" id=12]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00071.png" type="Texture" id=13]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00065.png" type="Texture" id=14]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00077.png" type="Texture" id=15]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00067.png" type="Texture" id=16]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00063.png" type="Texture" id=17]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00070.png" type="Texture" id=18]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00069.png" type="Texture" id=19]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00068.png" type="Texture" id=20]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00066.png" type="Texture" id=21]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00076.png" type="Texture" id=22]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00056.png" type="Texture" id=23]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00080.png" type="Texture" id=24]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00058.png" type="Texture" id=25]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00075.png" type="Texture" id=26]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00079.png" type="Texture" id=27]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00064.png" type="Texture" id=28]
[ext_resource path="res://Boss/Boss.gd" type="Script" id=29]
[ext_resource path="res://Boss/AttackState.gd" type="Script" id=30]
[ext_resource path="res://Levels/Level1.gd" type="Script" id=31]
[ext_resource path="res://Boss/IdleState.gd" type="Script" id=32]
[ext_resource path="res://Boss/Sleeping.gd" type="Script" id=33]
[ext_resource path="res://Boss/WakeUp.gd" type="Script" id=34]
[ext_resource path="res://Assets/Boss/Idle/Idle_00005.png" type="Texture" id=35]
[ext_resource path="res://Assets/Boss/Idle/Idle_00009.png" type="Texture" id=36]
[ext_resource path="res://Assets/Boss/Idle/Idle_00006.png" type="Texture" id=37]
[ext_resource path="res://Assets/Boss/Idle/Idle_00001.png" type="Texture" id=38]
[ext_resource path="res://Assets/Boss/Idle/Idle_00007.png" type="Texture" id=39]
[ext_resource path="res://Assets/Boss/Idle/Idle_00002.png" type="Texture" id=40]
[ext_resource path="res://Assets/Boss/Attack/Attack_00029.png" type="Texture" id=41]
[ext_resource path="res://Assets/Boss/Idle/Idle_00008.png" type="Texture" id=42]
[ext_resource path="res://Assets/Boss/Attack/Attack_00030.png" type="Texture" id=43]
[ext_resource path="res://Assets/Boss/Attack/Attack_00028.png" type="Texture" id=44]
[ext_resource path="res://Assets/Boss/Attack/Attack_00031.png" type="Texture" id=45]
[ext_resource path="res://Assets/Boss/Idle/Idle_00003.png" type="Texture" id=46]
[ext_resource path="res://Assets/Boss/Idle/Idle_00000.png" type="Texture" id=47]
[ext_resource path="res://Assets/Boss/Idle/Idle_00004.png" type="Texture" id=48]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00084.png" type="Texture" id=49]
[ext_resource path="res://Assets/Boss/Attack/Attack_00020.png" type="Texture" id=50]
[ext_resource path="res://Assets/Boss/Attack/Attack_00015.png" type="Texture" id=51]
[ext_resource path="res://Assets/Boss/Attack/Attack_00014.png" type="Texture" id=52]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00081.png" type="Texture" id=53]
[ext_resource path="res://Assets/Boss/Attack/Attack_00016.png" type="Texture" id=54]
[ext_resource path="res://Assets/Boss/Attack/Attack_00025.png" type="Texture" id=55]
[ext_resource path="res://Assets/Boss/Attack/Attack_00022.png" type="Texture" id=56]
[ext_resource path="res://Assets/Boss/Attack/Attack_00027.png" type="Texture" id=57]
[ext_resource path="res://Assets/Boss/Attack/Attack_00018.png" type="Texture" id=58]
[ext_resource path="res://Assets/Boss/Attack/Attack_00032.png" type="Texture" id=59]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00082.png" type="Texture" id=60]
[ext_resource path="res://Assets/Boss/Attack/Attack_00026.png" type="Texture" id=61]
[ext_resource path="res://Assets/Boss/Attack/Attack_00023.png" type="Texture" id=62]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00085.png" type="Texture" id=63]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00083.png" type="Texture" id=64]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00089.png" type="Texture" id=65]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00087.png" type="Texture" id=66]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00061.png" type="Texture" id=67]
[ext_resource path="res://Assets/Boss/Attack/Attack_00033.png" type="Texture" id=68]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00048.png" type="Texture" id=69]
[ext_resource path="res://Assets/Boss/Attack/Attack_00017.png" type="Texture" id=70]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00086.png" type="Texture" id=71]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00051.png" type="Texture" id=72]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00052.png" type="Texture" id=73]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00053.png" type="Texture" id=74]
[ext_resource path="res://Assets/Boss/Attack/Attack_00019.png" type="Texture" id=75]
[ext_resource path="res://Assets/Boss/Attack/Attack_00021.png" type="Texture" id=76]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00088.png" type="Texture" id=77]
[ext_resource path="res://Assets/Boss/Attack/Attack_00024.png" type="Texture" id=78]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00057.png" type="Texture" id=79]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00059.png" type="Texture" id=80]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00060.png" type="Texture" id=81]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00049.png" type="Texture" id=82]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00050.png" type="Texture" id=83]
[ext_resource path="res://Assets/Boss/WakUp/WakeUp_00054.png" type="Texture" id=84]
[ext_resource path="res://Tiles/Fence.tscn" type="PackedScene" id=85]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 7, 10 )

[sub_resource type="SpriteFrames" id=2]
animations = [ {
"frames": [ ExtResource( 47 ), ExtResource( 38 ), ExtResource( 40 ), ExtResource( 46 ), ExtResource( 48 ), ExtResource( 35 ), ExtResource( 37 ), ExtResource( 39 ), ExtResource( 42 ), ExtResource( 36 ) ],
"loop": true,
"name": "Idle",
"speed": 10.0
}, {
"frames": [ ExtResource( 52 ), ExtResource( 51 ), ExtResource( 54 ), ExtResource( 70 ), ExtResource( 58 ), ExtResource( 75 ), ExtResource( 50 ), ExtResource( 76 ), ExtResource( 56 ), ExtResource( 62 ), ExtResource( 78 ), ExtResource( 55 ), ExtResource( 61 ), ExtResource( 57 ), ExtResource( 44 ), ExtResource( 41 ), ExtResource( 43 ), ExtResource( 45 ), ExtResource( 59 ), ExtResource( 68 ) ],
"loop": true,
"name": "Attack",
"speed": 15.0
}, {
"frames": [ ExtResource( 69 ), ExtResource( 82 ), ExtResource( 83 ), ExtResource( 72 ), ExtResource( 73 ), ExtResource( 74 ), ExtResource( 84 ), ExtResource( 12 ), ExtResource( 23 ), ExtResource( 79 ), ExtResource( 25 ), ExtResource( 80 ), ExtResource( 81 ), ExtResource( 67 ), ExtResource( 5 ), ExtResource( 17 ), ExtResource( 28 ), ExtResource( 14 ), ExtResource( 21 ), ExtResource( 16 ), ExtResource( 20 ), ExtResource( 19 ), ExtResource( 18 ), ExtResource( 13 ), ExtResource( 9 ), ExtResource( 10 ), ExtResource( 8 ), ExtResource( 26 ), ExtResource( 22 ), ExtResource( 15 ), ExtResource( 11 ), ExtResource( 27 ), ExtResource( 24 ), ExtResource( 53 ), ExtResource( 60 ), ExtResource( 64 ), ExtResource( 49 ), ExtResource( 63 ), ExtResource( 71 ), ExtResource( 66 ), ExtResource( 77 ), ExtResource( 65 ) ],
"loop": true,
"name": "WakeUp",
"speed": 15.0
}, {
"frames": [ ExtResource( 69 ) ],
"loop": true,
"name": "Sleeping",
"speed": 5.0
} ]

[sub_resource type="CircleShape2D" id=3]
radius = 310.103

[sub_resource type="StyleBoxFlat" id=4]
bg_color = Color( 0.662745, 0.227451, 0.227451, 1 )
corner_radius_top_left = 10
corner_radius_top_right = 10
corner_radius_bottom_right = 10
corner_radius_bottom_left = 10

[node name="Level1" type="Node"]
script = ExtResource( 31 )

[node name="Herb" type="Node2D" parent="."]
position = Vector2( 2382, -1459 )

[node name="Herb" type="Sprite" parent="Herb"]
texture = ExtResource( 4 )

[node name="Area2D" type="Area2D" parent="Herb"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Herb/Area2D"]
shape = SubResource( 1 )

[node name="StageMusic" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 6 )
volume_db = -30.0

[node name="Zombies" type="Node2D" parent="."]

[node name="YSort" type="YSort" parent="."]

[node name="Boss" type="KinematicBody2D" parent="."]
position = Vector2( 2379, -1630 )
script = ExtResource( 29 )
__meta__ = {
"_edit_group_": true
}

[node name="AnimatedSprite" type="AnimatedSprite" parent="Boss"]
frames = SubResource( 2 )
animation = "WakeUp"
frame = 16
playing = true

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Boss"]
visible = false
polygon = PoolVector2Array( -53, 110, -57, 56, -80, 34, -88, -14, -66, -59, -33, -48, -27, -63, -28, -113, 39, -111, 38, -57, 44, -48, 79, -68, 105, -23, 102, 19, 77, 51, 62, 73, 61, 114 )

[node name="Area2D" type="Area2D" parent="Boss"]
visible = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Boss/Area2D"]
shape = SubResource( 3 )

[node name="FSM" type="Node" parent="Boss"]
script = ExtResource( 1 )
active = true
initial_state = "Sleeping"
target = NodePath("..")

[node name="Idle" type="Node" parent="Boss/FSM"]
script = ExtResource( 32 )

[node name="Sleeping" type="Node" parent="Boss/FSM"]
script = ExtResource( 33 )

[node name="Attack" type="Node" parent="Boss/FSM"]
script = ExtResource( 30 )

[node name="WakeUp" type="Node" parent="Boss/FSM"]
script = ExtResource( 34 )

[node name="Timer" type="Timer" parent="Boss"]

[node name="Health" type="Panel" parent="Boss"]
visible = false
margin_left = -118.0
margin_top = -167.0
margin_right = 128.0
margin_bottom = -142.0
custom_styles/panel = SubResource( 4 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Attack" type="AudioStreamPlayer2D" parent="Boss"]
stream = ExtResource( 3 )
attenuation = 0.933033

[node name="WakeUp" type="AudioStreamPlayer2D" parent="Boss"]
stream = ExtResource( 7 )
attenuation = 0.933033

[node name="TileMap" type="TileMap" parent="."]
tile_set = ExtResource( 2 )
cell_size = Vector2( 16, 16 )
cell_custom_transform = Transform2D( 16, 0, 0, 16, 0, 0 )
format = 1

[node name="Fences" type="Node2D" parent="."]

[node name="Fence" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2318, -1482 )

[node name="Fence2" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2318, -1452 )

[node name="Fence3" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2318, -1420 )

[node name="Fence4" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2318, -1389 )

[node name="Fence12" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2446, -1482 )

[node name="Fence11" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2446, -1452 )

[node name="Fence10" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2446, -1420 )

[node name="Fence9" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2446, -1389 )

[node name="Fence5" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2336, -1375 )
rotation = 1.57079

[node name="Fence6" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2368, -1375 )
rotation = 1.57079

[node name="Fence7" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2400, -1375 )
rotation = 1.57079

[node name="Fence8" parent="Fences" instance=ExtResource( 85 )]
position = Vector2( 2432, -1375 )
rotation = 1.57079
[connection signal="body_entered" from="Herb/Area2D" to="." method="_on_Area2D_body_entered"]
[connection signal="body_entered" from="Boss/Area2D" to="Boss/FSM/Sleeping" method="_on_Area2D_body_entered"]
[connection signal="timeout" from="Boss/Timer" to="Boss/FSM/Idle" method="_on_Timer_timeout"]
